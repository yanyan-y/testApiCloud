webpackJsonp([46],{hqsb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),s=i("Gu7T"),o=i.n(s),r=i("S8Wg"),l=i("ABCa"),c=i("pDNl"),u=i("HD9R"),d=i("kNDc"),p=i("LgOF"),h=i("/kga"),g=i("63CM"),f=i("2sLL"),v={content:"下拉刷新",height:40,autoRefresh:!1,downContent:"下拉刷新",upContent:"释放后刷新",loadingContent:"正在刷新...",clsPrefix:"xs-plugin-pulldown-"},m={content:"",pullUpHeight:60,height:40,autoRefresh:!1,downContent:"释放后加载",upContent:"",loadingContent:"加载中...",clsPrefix:"xs-plugin-pullup-"},_=(g.a,r.a,l.a,c.a,u.a,d.a,p.a,h.a,g.a,f.a,{content:"下拉刷新",height:40,autoRefresh:!1,downContent:"下拉刷新",upContent:"释放后刷新",loadingContent:"正在刷新...",clsPrefix:"xs-plugin-pulldown-"}),x={content:"",pullUpHeight:60,height:40,autoRefresh:!1,downContent:"释放后加载",upContent:"",loadingContent:"加载中...",clsPrefix:"xs-plugin-pullup-"},y={name:"convenience_channel",directives:{TransferDom:g.a},components:{Scroller:r.a,XHeader:l.a,XInput:c.a,Popup:u.a,Grid:d.a,GridItem:p.a,XDialog:h.a,TransferDom:g.a,XButton:f.a},data:function(){return{urls:this.$lib.getImgPath(),searchKey:"",popS:!1,titleName:this.$route.query.pageName?this.$route.query.pageName:"",city:this.$route.query.city?this.$route.query.city:"",cate_id:this.$route.query.id?this.$route.query.id:"",currentPage:1,lastPage:1,infoList:[],nav:{},isNoData:!1,pullupDefaultConfig:x,pulldownDefaultConfig:_}},created:function(){this.info_cate()},methods:{goRelease:function(){if(!this.$lib.getUserInfo())return void(this.popS=!0);this.info_num()},info_num:function(){var t=this;this.$http.get({api:"info_num",params:{}}).then(function(e){return t.$vux.loading.hide(),e.status?e.data.flag?void t.$router.push({name:"release",query:{pageName:t.titleName,city:t.city,id:t.cate_id}}):t.$vux.toast.show({type:"warn",text:e.data.msg,position:"middle",width:"17em"}):t.$vux.toast.show({type:"text",text:"加载失败,请稍后再试",position:"bottom",width:"17em"})},function(e){t.$vux.loading.hide(),t.$vux.toast.show({type:"text",text:e.message,position:"bottom",width:"17em"})})},info_cate:function(){var t=this;this.currentPage=1,this.$vux.loading.show({text:"加载中..."}),this.$http.get({api:"info",params:{city:this.city,cate_id:this.cate_id,keywords:this.searchKey,page:this.currentPage}}).then(function(e){if(t.$vux.loading.hide(),!e.status)return t.$vux.toast.show({type:"text",text:"加载失败,请稍后再试",position:"bottom"});t.lastPage=e.data.info.last_page,t.nav=e.data.adv,t.infoList=e.data.info.data,t.isNoData=t.infoList.length<1,t.blurInput()}).then(function(){t.$refs.scroller.donePulldown(),t.reset()},function(e){t.$vux.loading.hide(),t.$vux.toast.show({type:"text",text:e.message,position:"bottom"})})},loadMore:function(){var t=this;if(this.lastPage<this.currentPage+1)return this.$refs.scroller.donePullup(),void this.$vux.toast.show({text:"已经到底啦~",position:"bottom",type:"text"});this.$vux.loading.show({text:"加载中..."}),this.$http.get({api:"info",params:{city:this.city,cate_id:this.cate_id,keywords:this.searchKey,page:this.currentPage+1}}).then(function(e){if(t.$vux.loading.hide(),!e.status)return t.$vux.toast.show({type:"text",text:"加载失败,请稍后再试",position:"bottom"});t.currentPage=e.data.info.current_page,t.lastPage=e.data.info.last_page,t.infoList=[].concat(o()(t.infoList),o()(e.data.info.data))}).then(function(){t.$refs.scroller.donePullup(),t.reset()})},goDetails:function(t){this.$router.push({name:"convenience_details",query:{id:t}})},goAdvertising:function(){this.$router.push({name:"advertising",query:{adv:a()(this.nav)}})},blurInput:function(){var t=this;this.$nextTick(function(){t.$refs.inputVal.blur()})},goLogin:function(){this.popS=!1,this.$router.push("/pwd_login")},reset:function(){var t=this;this.$nextTick(function(){t.$refs.scroller.reset()})}},activated:function(){this.$route.meta.isUseCache||this.info_cate()},beforeRouteEnter:function(t,e,i){i(function(t){document.body.scrollTop=t.scrollTop})},beforeRouteLeave:function(t,e,i){"convenience_details"===t.name||"advertising"===t.name?e.meta.isUseCache=!0:(e.meta.isUseCache=!1,e.meta.keepAlive=!1),this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop,i()}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"myMessage convenience_channel"},[n("x-header",{attrs:{"left-options":{backText:""}}},[n("span",{staticStyle:{color:"#fff"}},[t._v(t._s(t.titleName))]),t._v(" "),n("img",{staticStyle:{width:"17px"},attrs:{slot:"right",src:i("TjYj")},on:{click:t.goRelease},slot:"right"})]),t._v(" "),n("div",{staticClass:"search"},[n("svg",{staticClass:"vux-x-icon vux-x-icon-ios-search",staticStyle:{fill:"#999","vertical-align":"middle","margin-top":"-3px"},attrs:{type:"ios-search",size:"20",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M448.3 424.7L335 311.3c20.8-26 33.3-59.1 33.3-95.1 0-84.1-68.1-152.2-152-152.2-84 0-152 68.2-152 152.2s68.1 152.2 152 152.2c36.2 0 69.4-12.7 95.5-33.8L425 448l23.3-23.3zM120.1 312.6c-25.7-25.7-39.8-59.9-39.8-96.3s14.2-70.6 39.8-96.3 59.9-40 96.2-40c36.3 0 70.5 14.2 96.2 39.9s39.8 59.9 39.8 96.3-14.2 70.6-39.8 96.3c-25.7 25.7-59.9 39.9-96.2 39.9-36.3.1-70.5-14.1-96.2-39.8z"}})]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],ref:"inputVal",staticClass:"input",attrs:{type:"search",placeholder:"点击搜索"},domProps:{value:t.searchKey},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.info_cate(e)},input:function(e){e.target.composing||(t.searchKey=e.target.value)}}})]),t._v(" "),t.isNoData?n("div",{staticClass:"convenience"},[t._m(0)]):n("scroller",{ref:"scroller",attrs:{height:"-104","use-pullup":"","pullup-config":t.pullupDefaultConfig,"use-pulldown":"","pulldown-config":t.pulldownDefaultConfig,"lock-x":""},on:{"on-pullup-loading":t.loadMore,"on-pulldown-loading":t.info_cate,"on-scroll":t.reset}},[n("div",{staticClass:"body box convenience"},[t.nav.content?n("a",{attrs:{href:"javascript:;"},on:{click:t.goAdvertising}},[n("img",{staticClass:"nav-img",attrs:{src:t.nav.content,alt:""}})]):t._e(),t._v(" "),t._l(t.infoList,function(e,a){return n("div",{key:a,staticClass:"info-box",on:{click:function(i){return t.goDetails(e.id)}}},[e.img?n("img",{staticClass:"tit-imgs",attrs:{src:e.img,alt:""}}):n("img",{staticClass:"tit-imgs",attrs:{src:i("oLPy"),alt:""}}),t._v(" "),n("div",{staticClass:"det-info"},[n("div",{staticClass:"tits"},[n("div",[n("i",[t._v("【"+t._s(e.cate_name)+"】")]),t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),e.top_time?n("span",[t._v("置顶")]):t._e()]),t._v(" "),n("div",{staticClass:"money"},[t._v(t._s(e.price))]),t._v(" "),n("div",{staticClass:"but"},[e.address?n("img",{attrs:{src:i("fy/y"),alt:""}}):t._e(),t._v(" "),e.address?n("div",{staticClass:"nickNames"},[t._v(t._s(e.address))]):t._e(),t._v(" "),n("span",[t._v(t._s(e.human_time))])])])])})],2)]),t._v(" "),n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[n("x-dialog",{staticClass:"dialog-demo dialog-demo2",model:{value:t.popS,callback:function(e){t.popS=e},expression:"popS"}},[n("div",{staticStyle:{padding:"15px"}},[n("img",{staticClass:"img",attrs:{src:i("Pi5X"),alt:""}}),t._v(" "),n("img",{staticClass:"dele",attrs:{src:i("jaeZ"),alt:""},on:{click:function(e){t.popS=!1}}})]),t._v(" "),n("p",[t._v("您还未登陆，请先登陆～")]),t._v(" "),n("x-button",{staticStyle:{"font-size":"15px",width:"50%","border-radius":"25px",background:"#2389E3","margin-bottom":"15px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.goLogin(e)}}},[t._v("立即登陆")])],1)],1)],1)},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"noInfo"},[n("img",{attrs:{src:i("eiBa"),alt:""}}),t._v(" "),n("p",[t._v("暂无相关信息，换个城市看看吧～")])])}],$={render:C,staticRenderFns:w},b=$,k=i("VU/8"),P=k(y,b,!1,null,null,null);e.default=P.exports}});